{% extends 'base.html' %}

{% block title %}アカウント削除 - KifuCloud{% endblock title %}

{% block extra_css %}
<link rel="stylesheet" href="{{ static(master, 'css/accounts.css') }}">
{% endblock extra_css %}

{% block content %}
<div class="account-page fade-in">
  <div class="account-container">
    <!-- Page Header -->
    <div class="account-header">
      <h1 class="account-title">アカウント削除</h1>
      <p class="account-subtitle">
        この操作は元に戻すことができません。慎重にご検討ください
      </p>
    </div>

    <!-- Main Content -->
    <div class="account-main-single slide-up">
      <!-- Warning Section -->
      <div class="account-section">
        <div class="section-header">
          <i data-lucide="alert-triangle" class="section-icon" style="color: var(--warning);"></i>
          <h2 class="section-title">重要な警告</h2>
        </div>

        <div class="account-alert warning">
          <i data-lucide="alert-triangle" class="alert-icon"></i>
          <div>
            <strong>この操作は取り消すことができません</strong><br>
            アカウントを削除すると、以下のデータが永久に失われます：
            <ul style="margin: var(--space-sm) 0 0 var(--space-lg);">
              <li>すべての棋譜データ</li>
              <li>タグ設定</li>
              <li>アカウント情報</li>
              <li>その他の関連データ</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Delete Form Section -->
      <div class="account-section">
        <div class="section-header">
          <i data-lucide="trash-2" class="section-icon"></i>
          <h2 class="section-title">アカウント削除の確認</h2>
        </div>

        {% if error %}
        <div class="account-alert error">
          <i data-lucide="alert-circle" class="alert-icon"></i>
          <div>{{ error }}</div>
        </div>
        {% endif %}

        <form method="post" class="account-form" id="deleteAccountForm">
          <div class="form-group">
            <label class="form-label">{{ form.current_password.label }}</label>
            {{ form.current_password(class="form-input" + (" error" if form.current_password.errors else ""), id="currentPassword", autocomplete="current-password") }}
            {% if form.current_password.errors %}
            <div class="form-error">
              <i data-lucide="alert-circle" style="width: 14px; height: 14px;"></i>
              {% for error in form.current_password.errors %}
              {{ error }}
              {% endfor %}
            </div>
            {% endif %}
            <div class="form-help">
              本人確認のため、現在のパスワードを入力してください
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">{{ form.confirmation.label }}</label>
            {{ form.confirmation(class="form-input" + (" error" if form.confirmation.errors else ""), id="confirmation", placeholder="DELETE") }}
            {% if form.confirmation.errors %}
            <div class="form-error">
              <i data-lucide="alert-circle" style="width: 14px; height: 14px;"></i>
              {% for error in form.confirmation.errors %}
              {{ error }}
              {% endfor %}
            </div>
            {% endif %}
            <div class="form-help">
              削除を確認するため、<code style="background: var(--gray-100); padding: 2px 4px; border-radius: 4px;">DELETE</code>と入力してください
            </div>
          </div>

          <div class="form-actions">
            <button type="submit" class="form-submit" style="background: var(--error); box-shadow: 0 2px 4px rgba(239, 68, 68, 0.2);" id="submitBtn">
              <i data-lucide="trash-2" class="btn-icon"></i>
              アカウントを完全に削除する
            </button>
            <a href="{{ reverse(master, 'accounts:profile') }}" class="action-btn secondary">
              <i data-lucide="arrow-left" class="btn-icon"></i>
              キャンセル
            </a>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock content %}

{% block extra_js %}
<script src="{{ static(master, 'js/accounts.js') }}"></script>
{% endblock extra_js %}