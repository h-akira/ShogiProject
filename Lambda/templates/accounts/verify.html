{% extends 'base.html' %}

{% block title %}メール確認 - KifuCloud{% endblock title %}

{% block extra_css %}
<link rel="stylesheet" href="{{ static(master, 'css/auth.css') }}">
{% endblock extra_css %}

{% block extra_js %}
<script src="{{ static(master, 'js/username-validation.js') }}"></script>
{% endblock extra_js %}

{% block content %}
<div class="auth-page">
  <div class="auth-container">
    <div class="auth-card">
      <div class="auth-header">
        <div class="auth-logo">📧</div>
        <h1 class="auth-title">メールアドレス確認</h1>
        <p class="auth-subtitle">アカウント登録を完了するために、<br>確認コードを入力してください</p>
      </div>

      <div class="verify-instructions">
        <span class="icon">✉️</span>
        <p>
          登録されたメールアドレスに6桁の確認コードを送信しました。<br>
          メールボックスをご確認の上、コードを入力してください。
        </p>
      </div>

      {% if error %}
      <div class="alert alert-danger">
        <i data-lucide="alert-circle" style="width: 16px; height: 16px;"></i>
        {{ error }}
      </div>
      {% endif %}
      
      {% if message %}
      <div class="alert alert-success">
        <i data-lucide="check-circle" style="width: 16px; height: 16px;"></i>
        {{ message }}
      </div>
      {% endif %}
      
      <form method="post">
        <div class="form-group">
          <label class="form-label">{{ form.username.label }}</label>
          {{ form.username(class="form-input" + (" error" if form.username.errors else "")) }}
          {% if form.username.errors %}
          <div class="form-error">
            <i data-lucide="alert-triangle" style="width: 12px; height: 12px;"></i>
            {% for error in form.username.errors %}
            {{ error }}
            {% endfor %}
          </div>
          {% endif %}
        </div>
        
        <div class="form-group">
          <label class="form-label">{{ form.code.label }}</label>
          {{ form.code(class="form-input verification-code-input" + (" error" if form.code.errors else ""), placeholder="000000", maxlength="6") }}
          {% if form.code.errors %}
          <div class="form-error">
            <i data-lucide="alert-triangle" style="width: 12px; height: 12px;"></i>
            {% for error in form.code.errors %}
            {{ error }}
            {% endfor %}
          </div>
          {% endif %}
        </div>
        
        <button type="submit" class="auth-submit">
          <i data-lucide="check" style="width: 16px; height: 16px;"></i>
          確認コードを送信
        </button>
      </form>

      <div class="auth-links">
        <a href="{{ get_login_url(master) }}" class="auth-link">
          <i data-lucide="log-in" style="width: 16px; height: 16px;"></i>
          ログインページへ
        </a>
        <a href="{{ get_signup_url(master) }}" class="auth-link">
          <i data-lucide="user-plus" style="width: 16px; height: 16px;"></i>
          新規登録に戻る
        </a>
        <a href="{{ reverse(master, 'home') }}" class="auth-link secondary">
          <i data-lucide="home" style="width: 16px; height: 16px;"></i>
          ホームに戻る
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock content %}